{% extends "base.html" %}

{% block title %}
    <title>Push-up</title>
{% endblock %}

{% block content %}
<div class="flex flex-col items-center justify-center min-h-screen bg-white-200 text-white">
    <div id="camera" class="w-full h-full ">
        <video id="video" class="w-full h-full object-cover"></video>
    </div>

    <div class="flex flex-row items-center justify-center m-8">
        <div id="score" class="text-4xl font-bold text-blue-700">Score: 0</div>

        <button id="finishButton" class=" ml-16 px-6 py-3 bg-blue-600 rounded-lg text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
            Finish
        </button>
    </div>
</div>

<script>
    const video = document.getElementById('video');

    navigator.mediaDevices.getUserMedia({ video: true })
        .then(stream => {
            video.srcObject = stream;
            video.play();
        })
        .catch(err => {
            console.error("Ошибка доступа к камере: ", err);
        });

    let score = 0;
    const scoreElement = document.getElementById('score');
    const finishButton = document.getElementById('finishButton');

    function updateScore(newScore) {
        score = newScore;
        scoreElement.textContent = `Score: ${score}`;
    }

    finishButton.addEventListener('click', () => {
        alert(`Вы завершили с ${score} баллами!`);
        // Логика завершения упражнения
    });

    setInterval(() => {
        updateScore(score + 1);
    }, 1000);
</script>
{% endblock %}
